var MiradorSyncWindows={locales:{en:{translation:{mainMenuButtonTooltip:"Create, delete, and manage synchronized window groups.",mainMenuButtonText:"Synchronized Windows",windowDropdownTooltip:"Assign this window to a synchronized window group.",windowDropdownItemText:"(no group)"}}},templates:{mainMenu:Mirador.Handlebars.compile(["<li>",'<a href="javascript:;" class="sync-windows mainmenu-button" title="{{t "mainMenuButtonTooltip"}}">','<span class="fa fa-sitemap fa-lg fa-fw"></span> {{t "mainMenuButtonText"}}',"</a>","</li>"].join("")),window:Mirador.Handlebars.compile(['<a href="javascript:;" class="mirador-btn mirador-icon-sync-windows mirador-tooltip" title="{{t "windowDropdownTooltip"}}">','<i class="fa fa-sitemap fa-lg fa-fw"></i>','<i class="fa fa-caret-down"></i>','<ul class="dropdown sync-window-groups">','<li class="no-lock remove-from-sync-window-group"><i class="fa fa-ban fa-lg fa-fw"></i> {{t "windowDropdownItemText"}}</li>',"</ul>","</a>"].join(""))},init:function(){var e=this;i18next.on("initialized",function(){for(var n in e.locales){var t="translation";i18next.addResourceBundle(n,t,e.locales[n][t],!0,!0)}}),function(n){var t=n.MainMenu.prototype.bindEvents;n.MainMenu.prototype.bindEvents=function(){var n=this;t.apply(this,arguments),this.element.find(".mirador-main-menu").prepend(e.templates.mainMenu()),this.element.find(".sync-windows").on("click",function(){n.eventEmitter.publish("toggleSyncWindowsPanel"),n.element.find(".sync-window-groups").removeClass("active"),jQuery(this).hasClass("active")?jQuery(this).removeClass("active"):jQuery(this).addClass("active")})}}(Mirador),function(e){var n=e.Viewer,t=e.Viewer.prototype,i=e.Viewer.prototype.setupViewer,o=e.Viewer.prototype.listenForActions;e.Viewer.prototype.setupViewer=function(){i.apply(this,arguments),this.syncWindowsPanel=new e.SyncWindowsPanel({appendTo:this.element.find(".mirador-viewer"),state:this.state,eventEmitter:this.eventEmitter})},e.Viewer.prototype.listenForActions=function(){var e=this;o.apply(this,arguments),this.eventEmitter.subscribe("toggleSyncWindowsPanel",function(n){e.toggleSyncWindowsPanel()})},e.Viewer.prototype.toggleSyncWindowsPanel=function(){this.toggleOverlay("syncWindowsPanelVisible"),jQuery("#sync-windows-accordion").accordion("refresh")},e.Viewer=function(){return new n(jQuery.extend(!0,Array.prototype.slice.call(arguments)[0],{overlayStates:{syncWindowsPanelVisible:!1}}))},e.Viewer.prototype=t}(Mirador),function(e){["BookView","ImageView"].forEach(function(n){var t=e[n].prototype.bindEvents;e[n].prototype.createOpenSeadragonInstance;e[n].prototype.bindEvents=function(){var e=this;t.apply(this,arguments),this.element.on({mouseenter:function(){e.leading=!0},mouseleave:function(){e.leading=!1}}),this.element.find(".mirador-osd-rotate-right").on("click",function(){e.leading&&e.eventEmitter.publish("syncWindowRotation",{viewObj:e,value:90})}),this.element.find(".mirador-osd-rotate-left").on("click",function(){e.leading&&e.eventEmitter.publish("syncWindowRotation",{viewObj:e,value:-90})}),this.element.find(".mirador-osd-brightness-slider").on("slide",function(n,t){e.leading&&e.eventEmitter.publish("syncWindowBrightness",{viewObj:e,value:t.value})}),this.element.find(".mirador-osd-contrast-slider").on("slide",function(n,t){e.leading&&e.eventEmitter.publish("syncWindowContrast",{viewObj:e,value:t.value})}),this.element.find(".mirador-osd-saturation-slider").on("slide",function(n,t){e.leading&&e.eventEmitter.publish("syncWindowSaturate",{viewObj:e,value:t.value})}),this.element.find(".mirador-osd-grayscale").on("click",function(){e.leading&&e.eventEmitter.publish("syncWindowGrayscale",e)}),this.element.find(".mirador-osd-invert").on("click",function(){e.leading&&e.eventEmitter.publish("syncWindowInvert",e)}),this.element.find(".mirador-osd-mirror").on("click",function(){e.leading&&e.eventEmitter.publish("syncWindowMirror",e)}),this.element.find(".mirador-osd-reset").on("click",function(){e.leading&&e.eventEmitter.publish("syncWindowReset",e)})},e[n].prototype.applyCSSFilter=function(e,n,t){switch(n){case"grayscale":case"invert":jQuery(e).hasClass("selected")?(this.filterValues[n]=n+"(0%)",jQuery(e).removeClass("selected")):(this.filterValues[n]=n+"(100%)",jQuery(e).addClass("selected"));break;case"brightness":case"contrast":case"saturate":this.filterValues[n]=n+"("+t+"%)",jQuery(e).find(".percent").text(t+"%")}this.setFilterCSS()},e[n].prototype.osdRotate=function(e){var n=this.osd;if(n){var t=n.viewport.getRotation();n.viewport.setRotation(t+e)}},e[n].prototype.filterValues={brightness:"brightness(100%)",contrast:"contrast(100%)",saturate:"saturate(100%)",grayscale:"grayscale(0%)",invert:"invert(0%)"},e[n].prototype.setFilterCSS=function(){var e=this,n=jQuery.map(e.filterValues,function(e,n){return e}).join(" ");jQuery(e.osd.drawer.canvas).css({filter:n,"-webkit-filter":n,"-moz-filter":n,"-o-filter":n,"-ms-filter":n})},e[n].prototype.resetImageManipulationControls=function(){this.osd&&this.osd.viewport.setRotation(0),this.filterValues.brightness="brightness(100%)",this.element.find(".mirador-osd-brightness-slider").slider("option","value",100),this.element.find(".mirador-osd-brightness-slider").find(".percent").text("100%"),this.filterValues.contrast="contrast(100%)",this.element.find(".mirador-osd-contrast-slider").slider("option","value",100),this.element.find(".mirador-osd-contrast-slider").find(".percent").text("100%"),this.filterValues.saturate="saturate(100%)",this.element.find(".mirador-osd-saturation-slider").slider("option","value",100),this.element.find(".mirador-osd-saturation-slider").find(".percent").text("100%"),this.filterValues.grayscale="grayscale(0%)",this.element.find(".mirador-osd-grayscale").removeClass("selected"),this.filterValues.invert="invert(0%)",this.element.find(".mirador-osd-invert").removeClass("selected"),this.setFilterCSS()}})}(Mirador),function(e){var n=e.ImageView.prototype.initialiseImageCanvas;e.ImageView.prototype.initialiseImageCanvas=function(){var e=this;n.apply(this,arguments),e.osd.addHandler("zoom",function(){e.leading&&e.eventEmitter.publish("syncWindowZoom",e)}),e.osd.addHandler("pan",function(){e.leading&&e.eventEmitter.publish("syncWindowPan",e)})}}(Mirador),function(e){e.BookView.prototype.createOpenSeadragonInstance=function(n){var t=n+"/info.json",i=e.genUUID(),o="mirador-osd-"+i,s=this;this.element.find("."+this.osdCls).remove(),jQuery.getJSON(t).done(function(n,t,r){s.elemOsd=jQuery("<div/>").addClass(s.osdCls).attr("id",o).appendTo(s.element),s.osd=e.OpenSeadragon({id:o,tileSources:n,uniqueID:i}),s.osd.addHandler("zoom",e.debounce(function(){var e={x:-1e7,y:-1e7};s.eventEmitter.publish("updateTooltips."+s.windowId,[e,e])},30)),s.osd.addHandler("zoom",function(){s.leading&&s.eventEmitter.publish("syncWindowZoom",s)}),s.osd.addHandler("pan",e.debounce(function(){var e={x:-1e7,y:-1e7};s.eventEmitter.publish("updateTooltips."+s.windowId,[e,e])},30)),s.osd.addHandler("pan",function(){s.leading&&s.eventEmitter.publish("syncWindowPan",s)}),s.osd.addHandler("open",function(){if(s.eventEmitter.publish("osdOpen."+s.windowId),s.osdOptions.osdBounds){var n=new OpenSeadragon.Rect(s.osdOptions.osdBounds.x,s.osdOptions.osdBounds.y,s.osdOptions.osdBounds.width,s.osdOptions.osdBounds.height);s.osd.viewport.fitBounds(n,!0)}else s.setBounds();s.boundsToFocusOnNextOpen&&(s.eventEmitter.publish("fitBounds."+s.windowId,s.boundsToFocusOnNextOpen),s.boundsToFocusOnNextOpen=null),s.addAnnotationsLayer(s.elemAnno);var t=s.hud.annoState.current,i=s.element.find(".mirador-osd-edit-mode.selected"),o=null;i&&(o=i.find(".material-icons").html()),"none"===t?s.hud.annoState.startup():"off"===t||"off"===s.annotationState||s.hud.annoState.displayOff(),"pointer"===t||"on"===s.annotationState?s.hud.annoState.displayOn():"shape"===t&&(s.hud.annoState.displayOn(),s.hud.annoState.chooseShape(o)),s.osd.addHandler("zoom",e.debounce(function(){s.setBounds()},500)),s.osd.addHandler("pan",e.debounce(function(){s.setBounds()},500))})})}}(Mirador),function(e){var n=e.Workspace.prototype.init;e.Workspace.prototype.init=function(){n.apply(this,arguments),this.syncWindowsController=new e.SyncWindowsController({state:this.state,eventEmitter:this.eventEmitter})}}(Mirador),function(n){var t=n.Window.prototype.init,i=n.Window.prototype.listenForActions,o=n.Window.prototype.bindEvents;n.Window.prototype.init=function(){t.apply(this,arguments),this.eventEmitter.publish("windowReadyForSyncWindowGroups"),null!==this.focusModules[this.currentImageMode]&&this.eventEmitter.publish("restoreWindowToSyncWindowsController",this.focusModules[this.currentImageMode])},n.Window.prototype.listenForActions=function(){var e=this;i.apply(this,arguments),e.events.push(e.eventEmitter.subscribe("SET_CURRENT_CANVAS_ID."+this.id,function(n,t){e.leading&&e.eventEmitter.publish("syncWindowNavigationControls",{viewObj:e.focusModules[e.currentImageMode],value:t})})),e.events.push(e.eventEmitter.subscribe("updateSyncWindowGroupMenus",function(n,t){e.renderSyncWindowGroupMenu(t.keys)})),e.events.push(e.eventEmitter.subscribe("activateSyncWindowGroupMenuItem."+e.id,function(n,t){e.element.find(".add-to-sync-window-group").each(function(e,n){n.innerHTML===t&&(jQuery(this).parent().children(".add-to-sync-window-group").removeClass("current-group"),jQuery(this).addClass("current-group"))})}))},n.Window.prototype.bindEvents=function(){var n=this;o.apply(this,arguments),this.element.on({mouseenter:function(){n.leading=!0},mouseleave:function(){n.leading=!1}}),this.element.find(".window-manifest-navigation").prepend(e.templates.window()),this.element.find(".add-to-sync-window-group").on("click",function(e){n.addToSyncWindowGroup(this)}),this.element.find(".remove-from-sync-window-group").on("click",function(e){n.removeFromSyncWindowGroup(this)}),this.element.find(".mirador-icon-sync-windows").off("mouseenter").on("mouseenter",function(){n.element.find(".sync-window-groups").stop().slideFadeToggle(300)}).off("mouseleave").on("mouseleave",function(){n.element.find(".sync-window-groups").stop().slideFadeToggle(300)})},n.Window.prototype.addToSyncWindowGroup=function(e,n){var t;if(!0===n){if(""===(t=jQuery(e).parent().children(".add-to-sync-window-group.current-group").text()))return}else t=jQuery(e).text();this.eventEmitter.publish("addToSyncWindowGroup",{viewObj:this.focusModules[this.currentImageMode],syncWindowGroup:t}),jQuery(e).parent().children(".add-to-sync-window-group").removeClass("current-group"),jQuery(e).addClass("current-group")},n.Window.prototype.removeFromSyncWindowGroup=function(e){var n=this.focusModules[this.currentImageMode];null!==n&&(this.eventEmitter.publish("removeFromSyncWindowGroup",{viewObj:n}),jQuery(e).parent().children(".add-to-sync-window-group").removeClass("current-group"))},n.Window.prototype.renderSyncWindowGroupMenu=function(e){var n=this,t=d3.select(this.element[0]).select(".sync-window-groups").selectAll(".sync-window-groups-item").data(e,function(e){return e});t.enter().append("li").classed({"sync-window-groups-item":!0,"add-to-sync-window-group":!0}).text(function(e){return e}).on("click",function(){n.addToSyncWindowGroup(this)}),t.exit().remove()}}(Mirador),function(e){var n=e.SaveController.prototype.bindEvents;e.SaveController.prototype.bindEvents=function(){var e=this;n.apply(this,arguments),e.eventEmitter.subscribe("syncWindowGroupsStateChanged",function(n,t){var i=JSON.stringify(t,function(e,n){return"views"===e&&this.hasOwnProperty("settings")&&this.settings.hasOwnProperty("profile")&&this.settings.hasOwnProperty("zoompan")&&this.settings.hasOwnProperty("rotation")&&this.settings.hasOwnProperty("brightness")&&this.settings.hasOwnProperty("contrast")&&this.settings.hasOwnProperty("invert")&&this.settings.hasOwnProperty("grayscale")&&this.settings.hasOwnProperty("reset")?[]:n});e.set("syncWindowGroupsState",i,{parent:"currentConfig"})})}}(Mirador)}};$(document).ready(function(){MiradorSyncWindows.init()});
!function(n){n.SyncWindowsController=function(n){jQuery.extend(!0,this,{syncWindows:null,state:null,eventEmitter:null},n),this.init()},n.SyncWindowsController.prototype={init:function(){var n=this,e=n.state.getStateProperty("syncWindowGroupsState");n.syncWindows=void 0!==e?JSON.parse(e):{keys:[],byGroup:{},byWindow:{}},n.listenForActions()},getSyncWindowGroupOfWindow:function(n){return this.syncWindows.byWindow[n.windowId]},lockOptions:{dimensionalLockMirror:function(n,e){var o=n.osd.viewport.getCenter(),t=n.osd.viewport.getContainerSize().x,i=e.osd.viewport.getContainerSize().x/t,s=n.osd.viewport.getBounds().width*i,r=s/e.osd.viewport.getAspectRatio(),d=o.x-s/2,c=o.y-r/2,a=new OpenSeadragon.Rect(d,c,s,r);e.osd.viewport.fitBounds(a)},dimensionalLockOffset:function(n,e){var o=n.osd.viewport.getCenter(),t=n.osd.viewport.getContainerSize().x,i=e.osd.viewport.getContainerSize().x/t,s=n.osd.viewport.getBounds().width*i,r=s/e.osd.viewport.getAspectRatio(),d=o.x+n.osd.viewport.getBounds().width/2,c=o.y-r/2,a=new OpenSeadragon.Rect(d,c,s,r);e.osd.viewport.fitBounds(a)}},listenForActions:function(){var n=this;n.eventEmitter.subscribe("windowReadyForSyncWindowGroups",function(e){n.eventEmitter.publish("updateSyncWindowGroupMenus",n.syncWindows)}),n.eventEmitter.subscribe("createSyncWindowGroup",function(e,o){n.createSyncWindowGroup(o),n.eventEmitter.publish("updateSyncWindowGroupMenus",n.syncWindows),n.eventEmitter.publish("syncWindowGroupsStateChanged",n.syncWindows)}),n.eventEmitter.subscribe("deleteSyncWindowGroup",function(e,o){n.deleteSyncWindowGroup(o),n.eventEmitter.publish("updateSyncWindowGroupMenus",n.syncWindows),n.eventEmitter.publish("syncWindowGroupsStateChanged",n.syncWindows)}),n.eventEmitter.subscribe("addToSyncWindowGroup",function(e,o){n.addToSyncWindowGroup(o.viewObj,o.syncWindowGroup),n.eventEmitter.publish("syncWindowGroupsStateChanged",n.syncWindows)}),n.eventEmitter.subscribe("removeFromSyncWindowGroup",function(e,o){n.removeFromSyncWindowGroup(o.viewObj),n.eventEmitter.publish("syncWindowGroupsStateChanged",n.syncWindows)}),n.eventEmitter.subscribe("syncWindowZoom",function(e,o){n.updateFollowers(o,"zoompan")}),n.eventEmitter.subscribe("syncWindowPan",function(e,o){n.updateFollowers(o,"zoompan")}),n.eventEmitter.subscribe("syncWindowGrayscale",function(e,o){n.updateFollowers(o,"grayscale")}),n.eventEmitter.subscribe("syncWindowInvert",function(e,o){n.updateFollowers(o,"invert")}),n.eventEmitter.subscribe("syncWindowReset",function(e,o){n.updateFollowers(o,"reset")}),n.eventEmitter.subscribe("syncWindowBrightness",function(e,o){n.updateFollowers(o.viewObj,"brightness",o.value)}),n.eventEmitter.subscribe("syncWindowContrast",function(e,o){n.updateFollowers(o.viewObj,"contrast",o.value)}),n.eventEmitter.subscribe("syncWindowSaturate",function(e,o){n.updateFollowers(o.viewObj,"saturate",o.value)}),n.eventEmitter.subscribe("syncWindowRotation",function(e,o){n.updateFollowers(o.viewObj,"rotation",o.value)}),n.eventEmitter.subscribe("syncWindowNavigationControls",function(e,o){n.updateFollowers(o.viewObj,"navigationControls",o.value)}),n.eventEmitter.subscribe("toggleSyncWindowGroupSettings",function(e,o){n.toggleSyncWindowGroupSettings(o.groupID,o.key,o.value),n.eventEmitter.publish("syncWindowGroupsStateChanged",n.syncWindows)}),n.eventEmitter.subscribe("syncWindowsPanelReady",function(e){n.eventEmitter.publish("updateSyncWindowGroupMenus",n.syncWindows)}),n.eventEmitter.subscribe("restoreWindowToSyncWindowsController",function(e,o){var t=n.getSyncWindowGroupOfWindow(o);void 0!==t&&(n.syncWindows.byGroup[t].views.push(o),n.eventEmitter.publish("activateSyncWindowGroupMenuItem."+o.windowId,t))})},createSyncWindowGroup:function(n){var e=this;void 0===e.syncWindows.byGroup[n]?(e.syncWindows.byGroup[n]={views:[],settings:{profile:"dimensionalLockMirror",zoompan:!0,rotation:!0,brightness:!0,saturate:!0,contrast:!0,invert:!0,grayscale:!0,reset:!0,navigationControls:!0}},e.syncWindows.keys.push(n)):alert("There is already a synchronized window group with that name!")},deleteSyncWindowGroup:function(n){var e=this;delete e.syncWindows.byGroup[n],jQuery.each(e.syncWindows.byWindow,function(o,t){t===n&&delete e.syncWindows.byWindow[o]});var o=e.syncWindows.keys.indexOf(n);-1!==o&&e.syncWindows.keys.splice(o,1)},addToSyncWindowGroup:function(n,e){var o=this;o.removeFromSyncWindowGroup(n),o.syncWindows.byGroup[e].views.push(n),o.syncWindows.byWindow[n.windowId]=e},removeFromSyncWindowGroup:function(n){var e,o,t=this,i=t.syncWindows.byWindow[n.windowId];void 0!==i&&(e=t.syncWindows.byGroup[i].views,jQuery.each(e,function(e,t){if(t.windowId===n.windowId)return o=e,!1}),e.splice(o,1),delete t.syncWindows.byWindow[n.windowId])},toggleSyncWindowGroupSettings:function(n,e,o){var t=this.syncWindows.byGroup[n].settings;t[e];switch(e){case"profile":t[e]=o;break;case"zoompan":case"rotation":case"brightness":case"contrast":case"saturate":case"invert":case"grayscale":case"reset":case"navigationControls":t[e]=!t[e];break;default:alert("ERROR: unknown synchronized window group setting is being toggled!")}},updateFollowers:function(n,e,o){var t,i,s,r=this,d=r.syncWindows.byWindow[n.windowId],c=r.syncWindows.byGroup[d];void 0!==c&&(t=c.views,!0===(i=c.settings)[e]&&jQuery.each(t,function(d,c){if(n.windowId===c.windowId){var a=t.filter(function(e){return e.windowId!==n.windowId});return jQuery.each(a,function(t,d){switch(e){case"zoompan":r.lockOptions[i.profile](n,d);break;case"grayscale":case"invert":s=d.element.find(".mirador-osd-"+e),d.applyCSSFilter(s,e);break;case"reset":d.resetImageManipulationControls();break;case"brightness":case"contrast":case"saturate":(s=d.element.find(".mirador-osd-"+("saturate"===e?"saturation":e)+"-slider")).slider("option","value",o),d.applyCSSFilter(s,e,o);break;case"rotation":d.osdRotate(o);break;case"navigationControls":this.eventEmitter.publish("SET_CURRENT_CANVAS_ID."+d.windowId,o);break;default:alert("ERROR: unknown synchronized window group setting is being toggled!")}}),!1}}))}}}(Mirador);
!function(e){e.SyncWindowsPanel=function(e){jQuery.extend(!0,this,{element:null,appendTo:null},e),this.formOptions=[{name:"zoompan",label:"zoom/pan",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.zoompan?"checked":""}},options:[{name:"dimensionalLockMirror",label:"mirror",type:"radio",disabled:!0,test:function(e){return function(n){return"dimensionalLockMirror"===e.byGroup[n].settings.profile?"checked":""}}},{name:"dimensionalLockOffset",label:"offset",type:"radio",disabled:!0,test:function(e){return function(n){return"dimensionalLockOffset"===e.byGroup[n].settings.profile?"checked":""}}}]},{name:"rotation",label:"rotation",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.rotation?"checked":""}}},{name:"brightness",label:"brightness",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.brightness?"checked":""}}},{name:"contrast",label:"contrast",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.contrast?"checked":""}}},{name:"saturate",label:"saturation",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.saturate?"checked":""}}},{name:"invert",label:"invert",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.invert?"checked":""}}},{name:"grayscale",label:"grayscale",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.grayscale?"checked":""}}},{name:"reset",label:"reset",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.reset?"checked":""}}},{name:"navigationControls",label:"navigation controls",type:"checkbox",disabled:!1,test:function(e){return function(n){return e.byGroup[n].settings.navigationControls?"checked":""}}}],this.init()},e.SyncWindowsPanel.prototype={init:function(){this.element=jQuery(this.template()).appendTo(this.appendTo),this.bindEvents(),this.listenForActions(),jQuery("#sync-windows-accordion").accordion({collapsible:!0}),this.eventEmitter.publish("syncWindowsPanelReady")},listenForActions:function(){var e=this;e.eventEmitter.subscribe("syncWindowsPanelVisible.set",function(n,t){t?e.show():e.hide()}),e.eventEmitter.subscribe("updateSyncWindowGroupMenus",function(n,t){var i,o;i=t.keys,(o=d3.select(e.element[0]).select("#sync-windows-accordion").selectAll("li").data(i,function(e){return e})).enter().append("li").append("h4").text(function(e){return e}).select(function(){return this.parentNode}).append("form").each(function(n,i){var o=d3.select(this),r=function(n,i,o){n.append("input").property("type",o.type).property("name",o.name).property("checked",o.test(t)).call(function(){i>0&&this.style("margin-left",i+"em"),o.disabled&&this.property("disabled","disabled")}).on("change",function(){e.eventEmitter.publish("toggleSyncWindowGroupSettings",{groupID:jQuery(this).parent().parent().find("h4").text(),key:jQuery(this).attr("name")})}).select(function(){return this.parentNode}).append("label").text(o.label).call(function(){o.disabled&&this.style("color","#AFAFAF")}).select(function(){return this.parentNode}).append("br").select(function(){return this.parentNode})};e.formOptions.forEach(function(e){r(o,0,e),e.hasOwnProperty("options")&&e.options.forEach(function(e){r(o,1,e)})}),o.append("br").select(function(){return this.parentNode}).append("a").attr("href","javascript:;").classed({"mirador-btn":!0,"mirador-icon-delete-sync-window-group":!0}).on("click",function(n){e.eventEmitter.publish("deleteSyncWindowGroup",jQuery(this).parent().parent().find("h4").text())}).append("i").classed({fa:!0,"fa-trash-o":!0,"fa-lg":!0})}),o.exit().remove(),jQuery("#sync-windows-accordion").accordion("refresh")})},bindEvents:function(){var e=this;e.element.find(".mirador-icon-create-sync-window-group").off("click").on("click",function(n){var t=jQuery("#new-sync-window-group-name").val();t.length>0?(jQuery("#new-sync-window-group-name").val(""),e.eventEmitter.publish("createSyncWindowGroup",t)):alert("Please choose a name with non-zero length.")})},hide:function(){jQuery(this.element).hide({effect:"slide",direction:"up",duration:300,easing:"swing"})},show:function(){jQuery(this.element).show({effect:"slide",direction:"up",duration:300,easing:"swing"})},template:Handlebars.compile(['<div id="sync-windows-panel">',"<h3>Manage Synchronized Windows</h3>","<span>Window Group Name: ",'<input id="new-sync-window-group-name" type="text">','<a href="javascript:;" class="mirador-btn mirador-icon-create-sync-window-group">','<i class="fa fa-plus fa-lg"></i>',"</a>","</span>",'<ul id="sync-windows-accordion"></ul>',"</div>"].join(""))}}(Mirador);